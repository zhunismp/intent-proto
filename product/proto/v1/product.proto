syntax = "proto3";

package product.v1;

option go_package = "github.com/zhunismp/intent-proto/product/gen/go/proto/v1;productv1";

// Service
service ProductService {
  rpc CreateProduct (CreateProductRequest) returns (CreateProductResponse);
  rpc GetProduct (GetProductRequest) returns (GetProductResponse);
  rpc GetProductByStatus (GetProductByStatusRequest) returns (GetProductByStatusResponse);
  rpc UpdateProductInfo (UpdateProductInfoRequest) returns (UpdateProductInfoResponse);
  rpc DeleteProduct(DeleteProductRequest) returns (DeleteProductResponse);
}

service CauseService {
  rpc UpdateCauseStatus(UpdateCauseStatusRequest) returns (UpdateCauseStatusResponse);
}

service RankingService {
  rpc UpdateRank(UpdateRankRequest) returns (UpdateRankResponse);
}

// Model
message Cause {
  string id = 1;
  string reason = 2;
  bool status = 3;
}

message Product {
  string id = 1;
  string owner_id = 2;
  string name = 3;
  optional string image_url = 4;
  optional string link = 5;
  double price = 6;
  string status = 7;
  repeated Cause causes = 8;
}

// DTO
message CreateProductRequest {
  string user_id = 1;
  string name = 2;
  optional string image_url = 3;
  optional string link = 4;
  double price = 5;
  repeated string reasons = 6;
}

message CreateProductResponse {
  Product product = 1;
}

message GetProductRequest {
  string user_id = 1;
  string product_id = 2;
}

message GetProductResponse {
  Product product = 1;
}

message GetProductByStatusRequest {
  string user_id = 1;
  string status = 2;
}

message GetProductByStatusResponse {
  repeated Product products = 1;
}

message UpdateProductInfoRequest {
  string user_id = 1;
  string product_id = 2;
  optional string name = 3;
  optional string image_url = 4;
  optional string link = 5;
  optional double price = 6;
  optional string status = 7;
}

message UpdateProductInfoResponse {
  Product product = 1;
}

message UpdateCauseStatusRequest {
  string user_id = 1;
  string cause_id = 2;
  bool status = 3;
}

message UpdateCauseStatusResponse {
  Cause cause = 1;
}

message DeleteProductRequest {
  string user_id = 1;
  string product_id = 2;
}

message DeleteProductResponse {
  string product_id = 1;
}

message UpdateRankRequest {
  string user_id = 1;
  string product_id = 2;
  string product_before_id = 3;
  string product_after_id = 4;
}

message UpdateRankResponse {
  string product_id = 1;
}
